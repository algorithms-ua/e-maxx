<h1>Знаковая площадь треугольника и предикат "По часовой стрелке"</h1>



<h2>Определение</h2>

<p>Пусть даны три точки $p_1$, $p_2$, $p_3$. Найдём значение <b>знаковой площади</b> $S$ треугольника $p_1 p_2 p_3$, т.е. площади этого треугольника, взятой со знаком плюс или минус в зависимости от типа поворота, образуемого точками $p_1$, $p_2$, $p_3$: против часовой стрелки или по ней соответственно.</p>

<p>Понятно, что, если мы научимся вычислять такую знаковую ("ориентированную") площадь, то сможем и находить обычную площадь любого треугольника, а также сможем проверять, по часовой стрелке или против направлена какая-либо тройка точек.</p>



<h2>Вычисление</h2>

<p>Воспользуемся понятием <b>косого</b> (псевдоскалярного) произведения векторов. Оно как раз равно удвоенной знаковой площади треугольника:</p>

$$ a \land b = |a| |b| \sin \angle (a, b) = 2 S, $$

<p>где угол $\angle (a, b)$ берётся ориентированным, т.е. это угол вращения между этими векторами против часовой стрелки.</p>

<p>(Модуль косого произведения двух векторов равен модулю <b>векторного</b> произведения их).</p>

<p>Косое произведение вычисляется как величина определителя, составленного из координат точек:</p>

$$ 2 S = \left| \matrix{
x_1 & y_1 & 1 \cr
x_2 & y_2 & 1 \cr
x_3 & y_3 & 1 \cr
} \right| . $$

<p>Раскрывая определитель, можно получить такую формулу:</p>

$$ 2 S = x_1 (y_2 - y_3) + x_2 (y_3 - y_1) + x_3 (y_1 - y_2). $$

<p>Можно сгруппировать третье слагаемое с первыми двумя, избавившись от одного умножения:</p>

$$ 2 S = (x_2 - x_1) (y_3 - y_1) - (y_2 - y_1) (x_3 - x_1). $$

<p>Последнюю формулу удобно записывать и запоминать в матричном виде, как следующий определитель:</p>

$$ 2 S = \left| \matrix{
x_2 - x_1 & y_2 - y_1 \cr
x_3 - x_1 & y_3 - y_1 \cr
} \right| . $$



<h2>Реализация</h2>

<p>Функция, вычисляющая удвоенную знаковую площадь треугольника:</p>

\code
int triangle_area_2 (int x1, int y1, int x2, int y2, int x3, int y3) {
    return (x2 - x1) * (y3 - y1) - (y2 - y1) * (x3 - x1);
}
\endcode

<p>Функция, возвращающая обычную площадь треугольника:</p>

\code
double triangle_area (int x1, int y1, int x2, int y2, int x3, int y3) {
    return abs (triangle_area_2 (x1, y1, x2, y2, x3, y3)) / 2.0;
}
\endcode

<p>Функция, проверяющая, образует ли указанная тройка точек поворот по часовой стрелке:</p>

\code
bool clockwise (int x1, int y1, int x2, int y2, int x3, int y3) {
    return triangle_area_2 (x1, y1, x2, y2, x3, y3) < 0;
}
\endcode

<p>Функция, проверяющая, образует ли указанная тройка точек поворот против часовой стрелки:</p>

\code
bool counter_clockwise (int x1, int y1, int x2, int y2, int x3, int y3) {
    return triangle_area_2 (x1, y1, x2, y2, x3, y3) > 0;
}
\endcode